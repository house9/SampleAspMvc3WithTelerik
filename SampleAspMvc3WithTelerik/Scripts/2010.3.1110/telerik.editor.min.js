(function(s){var ao=s.telerik;function F(aZ){var aY={};for(var aX=0;aX<aZ.length;aX++){aY[aZ[aX]]=true}return aY}var aH=F("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed".split(","));var G="div,p,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,li,map,menu,noframes,noscript,object,ol,pre,script,table,tbody,td,tfoot,th,thead,tr,ul".split(",");var L=F(G);var aQ=F("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var".split(","));var K=F("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected".split(","));function g(aX){if(aX.nodeType==1){aX.normalize()}}function p(aX){var aY=0;while(aX=aX.previousSibling){aY++}return aY}function ac(aX){return aX&&aX.nodeValue!==null&&aX.data!==null}function k(aX,aY){try{return !ac(aX)&&(s.contains(aX,ac(aY)?aY.parentNode:aY)||aY.parentNode==aX)}catch(aZ){return false}}function y(aY,aX){return k(aY,aX)||aY==aX}function az(aY,aX){if(k(aY,aX)){while(aX&&aX.parentNode!=aY){aX=aX.parentNode}}return aX}function aD(aX){return ac(aX)?aX.length:aX.childNodes.length}function ar(aX,aZ){var aY=aX.cloneNode(false);aX.deleteData(aZ,aX.length);aY.deleteData(0,aZ);C.insertAfter(aY,aX)}function A(aY,aZ){for(var a0 in aZ){var aX=aY[a0];if(a0=="float"){aX=aY[s.support.cssFloat?"cssFloat":"styleFloat"]}if(typeof aX=="object"){if(!A(aX,aZ[a0])){return false}}else{if(aX!=aZ[a0]){return false}}}return true}var aB=/^\s+$/;var e=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i;var ae=("color,padding-left,padding-right,padding-top,padding-bottom,background-color,background-attachment,background-image,background-position,background-repeat,border-top-style,border-top-width,border-top-color,border-bottom-style,border-bottom-width,border-bottom-color,border-left-style,border-left-width,border-left-color,border-right-style,border-right-width,border-right-color,font-family,font-size,font-style,font-variant,font-weight,line-height").split(",");var C={blockParentOrBody:function(aX){return C.parentOfType(aX,G)||aX.ownerDocument.body},toHex:function(aX){var aY=e.exec(aX);if(!aY){return aX}return"#"+s.map(aY.slice(1),function(aZ){return aZ=parseInt(aZ).toString(16),aZ.length>1?aZ:"0"+aZ}).join("")},encode:function(aX){return aX.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00a0/g,"&nbsp;")},name:function(aX){return aX.nodeName.toLowerCase()},significantChildNodes:function(aX){return s.grep(aX.childNodes,function(aY){return aY.nodeType!=3||!C.isWhitespace(aY)})},lastTextNode:function(aY){if(aY.nodeType==3){return aY}var aX=null;for(var aZ=aY.lastChild;aZ;aZ=aZ.previousSibling){if(aX=C.lastTextNode(aZ)){return aX}}return aX},is:function(aX,aY){return C.name(aX)==aY},isMarker:function(aX){return aX.className=="t-marker"},isWhitespace:function(aX){return aB.test(aX.nodeValue)},isBlock:function(aX){return L[C.name(aX)]},isEmpty:function(aX){return aH[C.name(aX)]},isInline:function(aX){return aQ[C.name(aX)]},scrollTo:function(aX){aX.ownerDocument.body.scrollTop=s(ac(aX)?aX.parentNode:aX).offset().top},insertAt:function(aY,aX,aZ){aY.insertBefore(aX,aY.childNodes[aZ]||null)},insertBefore:function(aX,aY){return aY.parentNode.insertBefore(aX,aY)},insertAfter:function(aX,aY){return aY.parentNode.insertBefore(aX,aY.nextSibling)},remove:function(aX){aX.parentNode.removeChild(aX)},trim:function(aY){for(var aX=aY.childNodes.length-1;aX>=0;aX--){var aZ=aY.childNodes[aX];if(ac(aZ)){if(aZ.nodeValue.replace(/\ufeff/g,"").length==0){C.remove(aZ)}if(C.isWhitespace(aZ)){C.insertBefore(aZ,aY)}}else{if(aZ.className!="t-marker"){C.trim(aZ);if(aZ.childNodes.length==0&&!C.isEmpty(aZ)){C.remove(aZ)}}}}return aY},parentOfType:function(aX,aY){do{aX=aX.parentNode}while(aX&&!(C.ofType(aX,aY)));return aX},ofType:function(aX,aY){return s.inArray(C.name(aX),aY)>=0},changeTag:function(a1,aY){var a0=C.create(a1.ownerDocument,aY);var a4=a1.attributes;for(var aZ=0;aZ<a4.length;aZ++){var a2=a4[aZ];if(a2.specified){var a3=a2.nodeName;var aX=a2.nodeValue;if(a3=="class"){a0.className=aX}else{if(a3=="style"){a0.style.cssText=a1.style.cssText}else{a0.setAttribute(a3,aX)}}}}while(a1.firstChild){a0.appendChild(a1.firstChild)}C.insertBefore(a0,a1);C.remove(a1);return a0},wrap:function(aX,aY){C.insertBefore(aY,aX);aY.appendChild(aX);return aY},unwrap:function(aX){var aY=aX.parentNode;while(aX.firstChild){aY.insertBefore(aX.firstChild,aX)}aY.removeChild(aX)},create:function(aZ,aY,aX){return C.attr(aZ.createElement(aY),aX)},attr:function(aX,aY){aY=s.extend({},aY);if(aY&&"style" in aY){C.style(aX,aY.style);delete aY.style}return s.extend(aX,aY)},style:function(aX,aY){s(aX).css(aY||{})},unstyle:function(aY,aX){for(var aZ in aX){if(aZ=="float"){aZ=s.support.cssFloat?"cssFloat":"styleFloat"}aY.style[aZ]=""}if(aY.style.cssText==""){aY.removeAttribute("style")}},inlineStyle:function(aY,a1,a2){var aZ=C.create(aY,a1,a2);aY.body.appendChild(aZ);var aX=s(aZ);var a0=s.map(ae,function(a3){return a3+":"+aX.css(a3)}).join(";");aX.remove();return a0},commonAncestor:function(){var a0=arguments.length;if(!a0){return null}if(a0==1){return arguments[0]}var a1=[];var a2=Infinity;for(var aX=0;aX<a0;aX++){var a4=[];var a5=arguments[aX];while(a5){a4.push(a5);a5=a5.parentNode}a1.push(a4.reverse());a2=Math.min(a2,a4.length)}if(a0==1){return a1[0][0]}var a3=null;for(aX=0;aX<a2;aX++){var aZ=a1[0][aX];for(var aY=1;aY<a0;aY++){if(aZ!=a1[aY][aX]){return a3}}a3=aZ}return a3}};var r="xx-small,x-small,small,medium,large,x-large,xx-large".split(",");function B(aZ){var a2=[];var a1={"telerik:script":{start:function(a3){a2.push("<script");aY(a3);a2.push(">")},end:function(){a2.push("</script>")}},b:{start:function(){a2.push("<strong>")},end:function(){a2.push("</strong>")}},i:{start:function(){a2.push("<em>")},end:function(){a2.push("</em>")}},u:{start:function(){a2.push('<span style="text-decoration:underline;">')},end:function(){a2.push("</span>")}},font:{start:function(a5){a2.push('<span style="');var a3=a5.getAttribute("color");var a4=r[a5.getAttribute("size")];var a6=a5.getAttribute("face");if(a3){a2.push("color:");a2.push(C.toHex(a3));a2.push(";")}if(a6){a2.push("font-face:");a2.push(a6);a2.push(";")}if(a4){a2.push("font-size:");a2.push(a4);a2.push(";")}a2.push('">')},end:function(a3){a2.push("</span>")}}};function aY(a4){var bb=[],bj=a4.attributes,bg=s.trim;if(C.is(a4,"img")){var bm=a4.style.width,bc=a4.style.height,ba=s(a4);if(bm){ba.attr("width",parseInt(bm));C.unstyle(a4,{width:undefined})}if(bc){ba.attr("height",parseInt(bc));C.unstyle(a4,{height:undefined})}}for(var a9=0,be=bj.length;a9<be;a9++){var bd=bj[a9];var a6=bd.nodeName;if(bd.specified||(a6=="value"&&a4.value!="")||(a6=="type"&&bd.nodeValue=="text")){if(a6.indexOf("_moz")<0&&a6!="complete"){bb.push(bd)}}}if(!bb.length){return}bb.sort(function(bn,bo){return bn.nodeName>bo.nodeName?1:bn.nodeName<bo.nodeName?-1:0});for(var a9=0,be=bb.length;a9<be;a9++){var bd=bb[a9];var bl=bd.nodeName;var bf=bd.nodeValue;a2.push(" ");a2.push(bl);a2.push('="');if(bl=="style"){var a7=bg(bf||a4.style.cssText).split(";");for(var bh=0,a8=a7.length;bh<a8;bh++){var bk=a7[bh];if(bk.length){var bi=bk.split(":");var a5=bg(bi[0].toLowerCase()),a3=bg(bi[1]);if(a5.indexOf("color")>=0){a3=C.toHex(a3)}a2.push(a5);a2.push(":");a2.push(a3);a2.push(";")}}}else{if(bl=="src"||bl=="href"){a2.push(a4.getAttribute(bl,2))}else{a2.push(K[bl]?bl:bf)}}a2.push('"')}}function aX(a3,a4){for(var a5=a3.firstChild;a5;a5=a5.nextSibling){a0(a5,a4)}}function a0(a6,a7){var ba=a6.nodeType;if(ba==1){if(a6.attributes._moz_dirty&&C.is(a6,"br")){return}var a4=C.name(a6);var a8=a1[a4];if(a8){a8.start(a6);aX(a6);a8.end(a6);return}a2.push("<");a2.push(a4);aY(a6);if(aH[a4]){a2.push(" />")}else{a2.push(">");aX(a6,a7||C.is(a6,"pre"));a2.push("</");a2.push(a4);a2.push(">")}}else{if(ba==3){var a3=a6.nodeValue;if(!a7&&s.support.leadingWhitespace){var a9=a6.parentNode;var a5=(C.isInline(a9)?a9:a6).previousSibling;if(!a5||a5.innerHTML==""||C.isBlock(a5)){a3=a3.replace(/^[\r\n\v\f\t ]+/,"")}a3=a3.replace(/ +/," ")}a2.push(C.encode(a3))}else{if(ba==4){a2.push("<![CDATA[");a2.push(a6.data);a2.push("]]>")}else{if(ba==8){if(a6.data.indexOf("[CDATA[")<0){a2.push("<!--");a2.push(a6.data);a2.push("-->")}else{a2.push("<!");a2.push(a6.data);a2.push(">")}}}}}}aX(aZ);return a2.join("")}var u=0,an=1,a=2,R=3;function q(aY){var aX=aY.startContainer;return aX.nodeType==9?aX:aX.ownerDocument}function D(aX){return aX.getSelection?aX.getSelection():new at(aX.document)}function ai(aY){var aX=q(aY);return aV(aX)}function aV(aX){return D(ax(aX))}function ax(aX){return aX.defaultView||aX.parentWindow}function aj(aX,aY,a0){function aZ(a3){var a1=aX.cloneRange();a1.collapse(a3);a1[a3?"setStartBefore":"setEndAfter"](aY);var a2=a1.extractContents();if(a0){a2=C.trim(a2)}C[a3?"insertBefore":"insertAfter"](a2,aY)}aZ(true);aZ(false)}function M(aY){var aZ=S.image(aY);if(aZ){aY.setStartAfter(aZ);aY.setEndAfter(aZ)}var aX=ai(aY);aX.removeAllRanges();aX.addRange(aY)}function J(aX){s.extend(this,{ownerDocument:aX,startContainer:aX,endContainer:aX,commonAncestorContainer:aX,startOffset:0,endOffset:0,collapsed:true})}J.prototype={setStart:function(aX,aY){this.startContainer=aX;this.startOffset=aY;v(this);t(this,true)},setEnd:function(aX,aY){this.endContainer=aX;this.endOffset=aY;v(this);t(this,false)},setStartBefore:function(aX){this.setStart(aX.parentNode,p(aX))},setStartAfter:function(aX){this.setStart(aX.parentNode,p(aX)+1)},setEndBefore:function(aX){this.setEnd(aX.parentNode,p(aX))},setEndAfter:function(aX){this.setEnd(aX.parentNode,p(aX)+1)},selectNode:function(aX){this.setStartBefore(aX);this.setEndAfter(aX)},selectNodeContents:function(aX){this.setStart(aX,0);this.setEnd(aX,aX[aX.nodeType===1?"childNodes":"nodeValue"].length)},collapse:function(aX){if(aX){this.setEnd(this.startContainer,this.startOffset)}else{this.setStart(this.endContainer,this.endOffset)}},deleteContents:function(){var aY=this.cloneRange();if(this.startContainer!=this.commonAncestorContainer){this.setStartAfter(az(this.commonAncestorContainer,this.startContainer))}this.collapse(true);(function aX(aZ){while(aZ.next()){aZ.hasPartialSubtree()?aX(aZ.getSubtreeIterator()):aZ.remove()}})(new l(aY))},cloneContents:function(){var aX=q(this);return(function aY(a1){for(var a0,aZ=aX.createDocumentFragment();a0=a1.next();){a0=a0.cloneNode(!a1.hasPartialSubtree());if(a1.hasPartialSubtree()){a0.appendChild(aY(a1.getSubtreeIterator()))}aZ.appendChild(a0)}return aZ})(new l(this))},extractContents:function(){var aY=this.cloneRange();if(this.startContainer!=this.commonAncestorContainer){this.setStartAfter(az(this.commonAncestorContainer,this.startContainer))}this.collapse(true);var aZ=this;var aX=q(this);return(function a0(a3){for(var a2,a1=aX.createDocumentFragment();a2=a3.next();){a3.hasPartialSubtree()?a2=a2.cloneNode(false):a3.remove(aZ.originalRange);if(a3.hasPartialSubtree()){a2.appendChild(a0(a3.getSubtreeIterator()))}a1.appendChild(a2)}return a1})(new l(aY))},insertNode:function(aX){if(ac(this.startContainer)){if(this.startOffset!=this.startContainer.nodeValue.length){ar(this.startContainer,this.startOffset)}C.insertAfter(aX,this.startContainer)}else{C.insertAt(this.startContainer,aX,this.startOffset)}this.setStart(this.startContainer,this.startOffset)},cloneRange:function(){return s.extend(new J(this.ownerDocument),{startContainer:this.startContainer,endContainer:this.endContainer,commonAncestorContainer:this.commonAncestorContainer,startOffset:this.startOffset,endOffset:this.endOffset,collapsed:this.collapsed,originalRange:this})},toString:function(){var aY=this.startContainer.nodeName,aX=this.endContainer.nodeName;return[aY=="#text"?this.startContainer.nodeValue:aY,"(",this.startOffset,") : ",aX=="#text"?this.endContainer.nodeValue:aX,"(",this.endOffset,")"].join("")}};function m(aZ,aX,a4,a1){if(aZ==aX){return a1-a4}var a3=aX;while(a3&&a3.parentNode!=aZ){a3=a3.parentNode}if(a3){return p(a3)-a4}a3=aZ;while(a3&&a3.parentNode!=aX){a3=a3.parentNode}if(a3){return a1-p(a3)-1}var a2=C.commonAncestor(aZ,aX);var a0=aZ;while(a0&&a0.parentNode!=a2){a0=a0.parentNode}if(!a0){a0=a2}var aY=aX;while(aY&&aY.parentNode!=a2){aY=aY.parentNode}if(!aY){aY=a2}if(a0==aY){return 0}return p(aY)-p(a0)}function t(aY,aZ){function aX(a1){try{return m(a1.startContainer,a1.endContainer,a1.startOffset,a1.endOffset)<0}catch(a0){return true}}if(aX(aY)){if(aZ){aY.commonAncestorContainer=aY.endContainer=aY.startContainer;aY.endOffset=aY.startOffset}else{aY.commonAncestorContainer=aY.startContainer=aY.endContainer;aY.startOffset=aY.endOffset}aY.collapsed=true}}function v(aY){aY.collapsed=aY.startContainer==aY.endContainer&&aY.startOffset==aY.endOffset;var aX=aY.startContainer;while(aX&&aX!=aY.endContainer&&!k(aX,aY.endContainer)){aX=aX.parentNode}aY.commonAncestorContainer=aX}function aM(aX){return aX.createRange?aX.createRange():new J(aX)}function l(aY){s.extend(this,{range:aY,_current:null,_next:null,_end:null});if(aY.collapsed){return}var aX=aY.commonAncestorContainer;this._next=aY.startContainer==aX&&!ac(aY.startContainer)?aY.startContainer.childNodes[aY.startOffset]:az(aX,aY.startContainer);this._end=aY.endContainer==aX&&!ac(aY.endContainer)?aY.endContainer.childNodes[aY.endOffset]:az(aX,aY.endContainer).nextSibling}l.prototype={hasNext:function(){return !!this._next},next:function(){var aX=this._current=this._next;this._next=this._current&&this._current.nextSibling!=this._end?this._current.nextSibling:null;if(ac(this._current)){if(this.range.endContainer==this._current){(aX=aX.cloneNode(true)).deleteData(this.range.endOffset,aX.length-this.range.endOffset)}if(this.range.startContainer==this._current){(aX=aX.cloneNode(true)).deleteData(0,this.range.startOffset)}}return aX},traverse:function(aY){function aX(){this._current=this._next;this._next=this._current&&this._current.nextSibling!=this._end?this._current.nextSibling:null;return this._current}var aZ;while(aZ=aX.call(this)){if(this.hasPartialSubtree()){this.getSubtreeIterator().traverse(aY)}else{aY(aZ)}}return aZ},remove:function(a2){var a1=this.range.startContainer==this._current;var aZ=this.range.endContainer==this._current;if(ac(this._current)&&(a1||aZ)){var aY=a1?this.range.startOffset:0;var aX=aZ?this.range.endOffset:this._current.length;var a4=aX-aY;if(a2&&(a1||aZ)){if(this._current==a2.startContainer&&aY<=a2.startOffset){a2.startOffset-=a4}if(this._current==a2.endContainer&&aX<=a2.endOffset){a2.endOffset-=a4}}this._current.deleteData(aY,a4)}else{var a3=this._current.parentNode;if(a2&&(this.range.startContainer==a3||this.range.endContainer==a3)){var a0=p(this._current);if(a3==a2.startContainer&&a0<=a2.startOffset){a2.startOffset-=1}if(a3==a2.endContainer&&a0<a2.endOffset){a2.endOffset-=1}}C.remove(this._current)}},hasPartialSubtree:function(){return !ac(this._current)&&(y(this._current,this.range.startContainer)||y(this._current,this.range.endContainer))},getSubtreeIterator:function(){var aX=this.range.cloneRange();aX.selectNodeContents(this._current);if(y(this._current,this.range.startContainer)){aX.setStart(this.range.startContainer,this.range.startOffset)}if(y(this._current,this.range.endContainer)){aX.setEnd(this.range.endContainer,this.range.endOffset)}return new l(aX)}};function at(aX){this.ownerDocument=aX;this.rangeCount=1}at.prototype={addRange:function(aY){var aX=this.ownerDocument.body.createTextRange();h(aX,aY,false);h(aX,aY,true);aX.select()},removeAllRanges:function(){this.ownerDocument.selection.empty()},getRangeAt:function(){var aZ,aY=new J(this.ownerDocument),aX=this.ownerDocument.selection;try{aZ=aX.createRange()}catch(a0){return aY}if(aX.type=="Control"){aY.selectNode(aZ.item(0))}else{aG(aZ,aY,true);aG(aZ,aY,false);if(aY.startContainer.nodeType==9){aY.setStart(aY.endContainer,aY.startOffset)}if(aY.endContainer.nodeType==9){aY.setEnd(aY.startContainer,aY.endOffset)}if(aZ.compareEndPoints("StartToEnd",aZ)==0){aY.collapse(false)}}return aY}};function h(a4,aY,aX){var a1=aY[aX?"startContainer":"endContainer"];var a2=aY[aX?"startOffset":"endOffset"],a6=0;var aZ=ac(a1)?a1:a1.childNodes[a2]||null;var a3=ac(a1)?a1.parentNode:a1;if(a1.nodeType==3||a1.nodeType==4){a6=a2}var a5=a3.insertBefore(C.create(aY.ownerDocument,"a"),aZ);var a0=aY.ownerDocument.body.createTextRange();a0.moveToElementText(a5);C.remove(a5);a0[aX?"moveStart":"moveEnd"]("character",a6);a0.collapse(false);a4.setEndPoint(aX?"StartToStart":"EndToStart",a0)}function aG(a2,aY,aX){var a0=C.create(aY.ownerDocument,"a"),a3=a2.duplicate();a3.collapse(aX);var aZ=a3.parentElement();do{aZ.insertBefore(a0,a0.previousSibling);a3.moveToElementText(a0)}while(a3.compareEndPoints(aX?"StartToStart":"StartToEnd",a2)>0&&a0.previousSibling);a3.setEndPoint(aX?"EndToStart":"EndToEnd",a2);var a1=a0.nextSibling;if(!a1){a1=a0.previousSibling;if(a1&&ac(a1)){aY.setEnd(a1,a1.nodeValue.length);C.remove(a0)}else{aY.selectNodeContents(aZ);C.remove(a0);aY.endOffset-=1}return}C.remove(a0);if(ac(a1)){aY[aX?"setStart":"setEnd"](a1,a3.text.length)}else{aY[aX?"setStartBefore":"setEndBefore"](a1)}}function ag(aX){this.enumerate=function(){var aZ=[];function aY(a0){if(C.is(a0,"img")||(a0.nodeType==3&&!C.isWhitespace(a0))){aZ.push(a0)}else{a0=a0.firstChild;while(a0){aY(a0);a0=a0.nextSibling}}}new l(aX).traverse(aY);return aZ}}function j(aX){return new ag(aX).enumerate()}function X(a1){var aX=[];for(var aY=0,a0=a1.length;aY<a0;aY++){var aZ=C.parentOfType(a1[aY],G);if(aZ&&s.inArray(aZ,aX)<0){aX.push(aZ)}}return aX}function aC(aY){var aX=[];new l(aY).traverse(function(aZ){if(aZ.className=="t-marker"){aX.push(aZ)}});return aX}function ak(aZ){var a2=q(aZ);this.body=a2.body;this.html=this.body.innerHTML;function a1(a6){var a4=0,a3=a6.nodeType;while(a6=a6.previousSibling){var a5=a6.nodeType;if(a5!=3||a3!=a5){a4++}a3=a5}return a4}function a0(a3,a4){if(a3.nodeType==3){while((a3=a3.previousSibling)&&a3.nodeType==3){a4+=a3.nodeValue.length}}return a4}function aY(a3){var a4=[];while(a3!=a2){a4.push(a1(a3));a3=a3.parentNode}return a4}function aX(a5){var a4=a2,a3=a5.length;while(a3--){a4=a4.childNodes[a5[a3]]}return a4}this.startContainer=aY(aZ.startContainer);this.endContainer=aY(aZ.endContainer);this.startOffset=a0(aZ.startContainer,aZ.startOffset);this.endOffset=a0(aZ.endContainer,aZ.endOffset);this.toRange=function(){var a3=aZ.cloneRange();a3.setStart(aX(this.startContainer),this.startOffset);a3.setEnd(aX(this.endContainer),this.endOffset);return a3}}function aa(){var aX;this.addCaret=function(aY){aX=C.create(q(aY),"span",{className:"t-marker"});aY.insertNode(aX);aY.selectNode(aX);return aX};this.removeCaret=function(aZ){var a1=aX.previousSibling;var a4=0;if(a1){a4=ac(a1)?a1.nodeValue.length:p(a1)}var a3=aX.parentNode;var a2=a1?p(a1):0;C.remove(aX);g(a3);var aY=a3.childNodes[a2];if(ac(aY)){aZ.setStart(aY,a4)}else{if(aY){var a0=C.lastTextNode(aY);if(a0){aZ.setStart(a0,a0.nodeValue.length)}else{aZ[a1?"setStartAfter":"setStartBefore"](aY)}}else{if(!s.browser.msie&&a3.innerHTML==""){a3.innerHTML='<br _moz_dirty="" />'}aZ.selectNodeContents(a3)}}aZ.collapse(true)};this.add=function(aY,a0){if(a0&&aY.collapsed){this.addCaret(aY);aY=S.expand(aY)}var aZ=aY.cloneRange();aZ.collapse(false);this.end=C.create(q(aY),"span",{className:"t-marker"});aZ.insertNode(this.end);aZ=aY.cloneRange();aZ.collapse(true);this.start=this.end.cloneNode(true);aZ.insertNode(this.start);aY.setStartBefore(this.start);aY.setEndAfter(this.end);g(aY.commonAncestorContainer);return aY};this.remove=function(a5){var aY=this.start,ba=this.end;g(a5.commonAncestorContainer);while(!aY.nextSibling&&aY.parentNode){aY=aY.parentNode}while(!ba.previousSibling&&ba.parentNode){ba=ba.parentNode}var a0=(aY.previousSibling&&aY.previousSibling.nodeType==3)&&(aY.nextSibling&&aY.nextSibling.nodeType==3);var a6=(ba.previousSibling&&ba.previousSibling.nodeType==3)&&(ba.nextSibling&&ba.nextSibling.nodeType==3);aY=aY.nextSibling;ba=ba.previousSibling;var a9=false;var a3=false;if(aY==this.end){a3=!!this.start.previousSibling;aY=ba=this.start.previousSibling||this.end.nextSibling;a9=true}C.remove(this.start);C.remove(this.end);if(aY==null||ba==null){a5.selectNodeContents(a5.commonAncestorContainer);a5.collapse(true);return}var a8=a9?ac(aY)?aY.nodeValue.length:aY.childNodes.length:0;var a1=ac(ba)?ba.nodeValue.length:ba.childNodes.length;if(aY.nodeType==3){while(aY.previousSibling&&aY.previousSibling.nodeType==3){aY=aY.previousSibling;a8+=aY.nodeValue.length}}if(ba.nodeType==3){while(ba.previousSibling&&ba.previousSibling.nodeType==3){ba=ba.previousSibling;a1+=ba.nodeValue.length}}var a4=p(aY),a7=aY.parentNode;var a2=p(ba),aZ=ba.parentNode;for(var bc=aY;bc.previousSibling;bc=bc.previousSibling){if(bc.nodeType==3&&bc.previousSibling.nodeType==3){a4--}}for(var bb=ba;bb.previousSibling;bb=bb.previousSibling){if(bb.nodeType==3&&bb.previousSibling.nodeType==3){a2--}}g(a7);if(aY.nodeType==3){aY=a7.childNodes[a4]}g(aZ);if(ba.nodeType==3){ba=aZ.childNodes[a2]}if(a9){if(aY.nodeType==3){a5.setStart(aY,a8)}else{a5[a3?"setStartAfter":"setStartBefore"](aY)}a5.collapse(true)}else{if(aY.nodeType==3){a5.setStart(aY,a8)}else{a5.setStartBefore(aY)}if(ba.nodeType==3){a5.setEnd(ba,a1)}else{a5.setEndAfter(ba)}}if(aX){this.removeCaret(a5)}}}var ap=/[\u0009-\u000d]|\u0020|\u00a0|\ufeff|\.|,|;|:|!|\(|\)|\?/;var S={nodes:function(aY){var aX=j(aY);if(!aX.length){aY.selectNodeContents(aY.commonAncestorContainer);aX=j(aY);if(!aX.length){aX=C.significantChildNodes(aY.commonAncestorContainer)}}return aX},image:function(aY){var aX=[];new l(aY).traverse(function(aZ){if(C.is(aZ,"img")){aX.push(aZ)}});if(aX.length==1){return aX[0]}},expand:function(aY){var aZ=aY.cloneRange();var a2=aZ.startContainer.childNodes[aZ.startOffset==0?0:aZ.startOffset-1];var a3=aZ.endContainer.childNodes[aZ.endOffset];if(!ac(a2)||!ac(a3)){return aZ}var a0=a2.nodeValue;var a1=a3.nodeValue;if(a0==""||a1==""){return aZ}var aX=a0.split("").reverse().join("").search(ap);var a4=a1.search(ap);if(aX==0||a4==0){return aZ}a4=a4==-1?a1.length:a4;aX=aX==-1?0:a0.length-aX;aZ.setStart(a2,aX);aZ.setEnd(a3,a4);return aZ},isExpandable:function(aY){var a3=aY.startContainer;var a2=q(aY);if(a3==a2||a3==a2.body){return false}var aZ=aY.cloneRange();var aX=a3.nodeValue;if(!aX){return false}var a0=aX.substring(0,aZ.startOffset);var a1=aX.substring(aZ.startOffset);var a4=0,a5=0;if(a0!=""){a4=a0.split("").reverse().join("").search(ap)}if(a1!=""){a5=a1.search(ap)}return a4!=0&&a5!=0}};function c(aY){var aZ=new ak(aY.range);var aX=new aa();this.formatter=aY.formatter;this.getRange=function(){return aZ.toRange()};this.lockRange=function(a0){return aX.add(this.getRange(),a0)};this.releaseRange=function(a0){aX.remove(a0);M(a0)};this.undo=function(){aZ.body.innerHTML=aZ.html;M(aZ.toRange())};this.redo=function(){this.exec()};this.exec=function(){var a0=this.lockRange(true);this.formatter.editor=this.editor;this.formatter.toggle(a0);this.releaseRange(a0)}}function aS(aZ,aY){var aX=aZ.body;this.redo=function(){aX.innerHTML=aY.html;M(aY.toRange())};this.undo=function(){aX.innerHTML=aZ.html;M(aZ.toRange())}}function aN(aX){c.call(this,aX);this.managesUndoRedo=true;this.exec=function(){var aZ=this.editor;var aY=aZ.getRange();var a0=new ak(aY);aZ.clipboard.paste(aX.value||"");aZ.undoRedoStack.push(new aS(a0,new ak(aZ.getRange())));aZ.focus()}}function w(){V.call(this);this.command=function(aX){return new aN(aX)};this.update=function(aX,aY){aX.data("tSelectBox").close()};this.init=function(aZ,aX){var aY=aX.editor;aZ.tSelectBox({data:aY.insertHtml,onItemCreate:function(a0){a0.html='<span unselectable="on">'+a0.dataItem.Text+"</span>"},onChange:function(a0){V.exec(aY,"insertHtml",a0.value)},highlightFirst:false}).find(".t-input").html(aY.localization.insertHtml)}}function P(){var aY=[],aX=-1;this.push=function(aZ){aY=aY.slice(0,aX+1);aX=aY.push(aZ)-1};this.undo=function(){if(this.canUndo()){aY[aX--].undo()}};this.redo=function(){if(this.canRedo()){aY[++aX].redo()}};this.canUndo=function(){return aX>=0};this.canRedo=function(){return aX!=aY.length-1}}function aK(aX){this.keydown=function(a0){var aZ=aX.keyboard;var aY=aZ.isTypingKey(a0);if(!aY){au(aX)}if(aY&&!aZ.typingInProgress()){this.startRestorePoint=new ak(aX.getRange());aZ.startTyping(s.proxy(function(){this.endRestorePoint=new ak(aX.getRange());aX.undoRedoStack.push(new aS(this.startRestorePoint,this.endRestorePoint))},this));return true}return false};this.keyup=function(aY){var aZ=aX.keyboard;if(aZ.typingInProgress()){aZ.endTyping();return true}return false}}function z(aY){var aX=false;this.createUndoCommand=function(){this.endRestorePoint=new ak(aY.getRange());aY.undoRedoStack.push(new aS(this.startRestorePoint,this.endRestorePoint));this.startRestorePoint=this.endRestorePoint};this.changed=function(){if(this.startRestorePoint){return this.startRestorePoint.html!=aY.body.innerHTML}return false},this.keydown=function(aZ){var a0=aY.keyboard;if(a0.isModifierKey(aZ)){if(a0.typingInProgress()){a0.endTyping(true)}this.startRestorePoint=new ak(aY.getRange());return true}if(a0.isSystem(aZ)){aX=true;if(this.changed()){aX=false;this.createUndoCommand()}return true}return false};this.keyup=function(aZ){if(aX&&this.changed()){aX=false;this.createUndoCommand(aZ);return true}return false}}function aE(aY){var a0=false;var a3;var aZ;function aX(a4){return(a4>=48&&a4<=90)||(a4>=96&&a4<=111)||(a4>=186&&a4<=192)||(a4>=219&&a4<=222)}this.toolFromShortcut=function(a6,a8){var a5=String.fromCharCode(a8.keyCode);for(var a7 in a6){var a4=a6[a7];if((a4.key==a5||a4.key==a8.keyCode)&&!!a4.ctrl==a8.ctrlKey&&!!a4.alt==a8.altKey&&!!a4.shift==a8.shiftKey){return a7}}};this.isTypingKey=function(a5){var a4=a5.keyCode;return(aX(a4)&&!a5.ctrlKey&&!a5.altKey)||a4==32||a4==13||a4==8||(a4==46&&!a5.shiftKey&&!a5.ctrlKey&&!a5.altKey)};this.isModifierKey=function(a5){var a4=a5.keyCode;return(a4==17&&!a5.shiftKey&&!a5.altKey)||(a4==16&&!a5.ctrlKey&&!a5.altKey)||(a4==18&&!a5.ctrlKey&&!a5.shiftKey)};this.isSystem=function(a4){return a4.keyCode==46&&a4.ctrlKey&&!a4.altKey&&!a4.shiftKey};this.startTyping=function(a4){aZ=a4;a0=true};function a1(){a0=false;aZ()}this.endTyping=function(a4){this.clearTimeout();if(a4){a1()}else{a3=window.setTimeout(a1,1000)}};this.typingInProgress=function(){return a0};this.clearTimeout=function(){window.clearTimeout(a3)};function a2(a6,a5){for(var a4=0;a4<aY.length;a4++){if(aY[a4][a5](a6)){break}}}this.keydown=function(a4){a2(a4,"keydown")};this.keyup=function(a4){a2(a4,"keyup")}}function ay(a1){var a0=[new f()];function aY(a3){var a4=C.create(a1.document,"div");a4.innerHTML=a3;var a2=a1.document.createDocumentFragment();while(a4.firstChild){a2.appendChild(a4.firstChild)}return a2}function aX(a2){return/<(div|p|ul|ol|table|h[1-6])/i.test(a2)}this.oncut=function(a2){var a3=new ak(a1.getRange());setTimeout(function(){a1.undoRedoStack.push(new aS(a3,new ak(a1.getRange())))})};this.onpaste=function(a6){var a2=a1.getRange();var a4=new ak(a2);var a8=C.create(a1.document,"div",{className:"t-paste-container",innerHTML:"\ufeff"});a1.body.appendChild(a8);if(a1.body.createTextRange){a6.preventDefault();var a5=a1.createRange();a5.selectNodeContents(a8);a1.selectRange(a5);var a7=a1.body.createTextRange();a7.moveToElementText(a8);s(a1.body).unbind("paste");a7.execCommand("Paste");s(a1.body).bind("paste",arguments.callee)}else{var a3=a1.createRange();a3.selectNodeContents(a8);M(a3)}setTimeout(function(){M(a2);C.remove(a8);if(a8.lastChild&&C.is(a8.lastChild,"br")){C.remove(a8.lastChild)}a1.clipboard.paste(a8.innerHTML);a1.undoRedoStack.push(new aS(a4,new ak(a1.getRange())))})};function aZ(a3,a5){if(a3){return C.parentOfType(a5,["p","ul","ol"])||a5.parentNode}var a2=a5.parentNode;var a4=a5.ownerDocument.body;if(C.isInline(a2)){while(a2.parentNode!=a4&&!C.isBlock(a2.parentNode)){a2=a2.parentNode}}return a2}this.paste=function(a6){for(var a2=0,a4=a0.length;a2<a4;a2++){if(a0[a2].applicable(a6)){a6=a0[a2].clean(a6)}}a6=a6.replace(/^<li/i,"<ul><li").replace(/li>$/g,"li></ul>");var a3=aX(a6);var a5=a1.getRange();a5.deleteContents();if(a5.startContainer==a1.document){a5.selectNodeContents(a1.body)}var a7=new aa();var ba=a7.addCaret(a5);var a9=aZ(a3,ba);var a8=false;if(!/body|td/.test(C.name(a9))&&(a3||C.isInline(a9))){a5.selectNode(ba);aj(a5,a9,true);a8=true}var bb=aY(a6);a5.insertNode(bb);a9=aZ(a3,ba);if(a8){while(ba.parentNode!=a9){C.unwrap(ba.parentNode)}C.unwrap(ba.parentNode)}g(a5.commonAncestorContainer);ba.style.display="inline";C.scrollTo(ba);a7.removeCaret(a5);M(a5)}}function f(){var aX=[/<!--(.|\n)*?-->/g,"",/mso-[^;"]*;?/ig,"",/<\/?(meta|link|style|o:|v:)[^>]*>((?:.|\n)*?<\/(meta|link|style|o:|v:)[^>]*>)?/ig,""];this.applicable=function(a0){return/class="?Mso|style="[^"]*mso-/i.test(a0)};function aY(a0){if(/^[\u2022\u00b7\u00a7\u00d8o\-]\u00a0+/.test(a0)){return"ul"}if(/^\s*\w+[\.\)]\u00a0{2,}/.test(a0)){return"ol"}}function aZ(bd){var a5=C.create(document,"div",{innerHTML:bd});var bc=s(G.join(","),a5);var a7=-1,a2,bb={ul:{},ol:{}},a0=a5;for(var a8=0;a8<bc.length;a8++){var a3=bc[a8];var bd=a3.innerHTML.replace(/<\/?\w+[^>]*>/g,"").replace(/&nbsp;/g,"\u00a0");var a6=aY(bd);if(!a6||C.name(a3)!="p"){if(a3.innerHTML==""){C.remove(a3)}else{bb={ul:{},ol:{}};a0=a5;a7=-1}continue}var a9=parseFloat(a3.style.marginLeft||0);var ba=bb[a6][a9];if(a9>a7||!ba){ba=C.create(document,a6);if(a0==a5){C.insertBefore(ba,a3)}else{a0.appendChild(ba)}bb[a6][a9]=ba}if(a2!=a6){for(var a4 in bb){for(var a1 in bb[a4]){if(s.contains(ba,bb[a4][a1])){delete bb[a4][a1]}}}}C.remove(a3.firstChild);a0=C.create(document,"li",{innerHTML:a3.innerHTML});ba.appendChild(a0);C.remove(a3);a7=a9;a2=a6}return a5.innerHTML}this.clean=function(a1){for(var a0=0,a2=aX.length;a0<a2;a0+=2){a1=a1.replace(aX[a0],aX[a0+1])}a1=aZ(a1);a1=a1.replace(/\s+class="?[^"\s>]*"?/ig,"");return a1}}function i(aX){function aY(a1){var aZ=0;for(var a0=a1.parentNode.firstChild;a0;a0=a0.nextSibling){if(a0!=a1&&a0.className!="t-marker"&&a0.nodeType==1){aZ++}}return aZ}this.findSuitable=function(a0,aZ){if(!aZ&&aY(a0)>0){return null}return C.parentOfType(a0,aX[0].tags)};this.findFormat=function(a3){for(var aZ=0;aZ<aX.length;aZ++){var a1=a3;var a0=aX[aZ].tags;var a2=aX[aZ].attr;if(a1&&C.ofType(a1,a0)&&A(a1,a2)){return a1}while(a1){a1=C.parentOfType(a1,a0);if(a1&&A(a1,a2)){return a1}}}return null};this.isFormatted=function(aZ){for(var a0=0;a0<aZ.length;a0++){if(this.findFormat(aZ[a0])){return true}}return false}}function b(aZ,a1){this.finder=new i(aZ);var a0=s.extend({},aZ[0].attr,a1);var aX=aZ[0].tags[0];function aY(a2){return C.wrap(a2,C.create(a2.ownerDocument,aX,a0))}this.activate=function(a3,a2){if(this.finder.isFormatted(a2)){this.split(a3);this.remove(a2)}else{this.apply(a2)}};this.toggle=function(a4){var a5=j(a4);var a3=a5.length==0;var a7;if(a3){var a6=aC(a4);a7=a6[1];var a2=this.editor.document.createTextNode("\ufeff");C.insertBefore(a2,a7);a5.push(a2);a2=a2.cloneNode(true);C.insertAfter(a2,a7);a5.push(a2);a4.setEndAfter(a6[2])}this.activate(a4,a5);if(a3){this.editor.pendingFormats.push(a7.parentNode)}};this.apply=function(a5){var a4=[];for(var a2=0,a3=a5.length;a2<a3;a2++){var a7=a5[a2];var a6=this.finder.findSuitable(a7);if(a6){C.attr(a6,a0)}else{a6=aY(a7)}a4.push(a6)}this.consolidate(a4)};this.remove=function(a5){for(var a2=0,a4=a5.length;a2<a4;a2++){var a3=this.finder.findFormat(a5[a2]);if(a3){C.unwrap(a3)}}};this.split=function(a5){var a6=j(a5);var a3=a6.length==0;var a7;if(a3){a7=aC(a5)[1];a6.push(a7)}for(var a2=0,a4=a6.length;a2<a4;a2++){var a8=this.finder.findFormat(a6[a2]);if(a8){aj(a5,a8,true)}}};this.consolidate=function(a4){while(a4.length>1){var a2=a4.pop();var a3=a4[a4.length-1];if(a2.previousSibling&&a2.previousSibling.className=="t-marker"){a3.appendChild(a2.previousSibling)}if(a2.previousSibling==a3&&a2.style.cssText==a3.style.cssText){while(a2.firstChild){a3.appendChild(a2.firstChild)}C.remove(a2)}}}}function aW(aY,aX){i.call(this,aY);function aZ(a3){var be=a3.attributes,bb=s.trim;for(var a2=0,a9=be.length;a2<a9;a2++){var a8=be[a2];var a4=a8.nodeName;var ba=a8.nodeValue;if(a8.specified&&a4=="style"){var a5=bb(ba||a3.style.cssText).split(";");for(var bc=0,a6=a5.length;bc<a6;bc++){var bf=a5[bc];if(bf.length){var a7=bf.split(":");var bd=bb(a7[0].toLowerCase()),a1=bb(a7[1]);if(bd!=aX){continue}return bd.indexOf("color")>=0?C.toHex(a1):a1}}}}return}function a0(a5){var a6=s(ac(a5)?a5.parentNode:a5);var a4=a6.parents().andSelf();for(var a2=0,a3=a4.length;a2<a3;a2++){var a1=aX=="className"?a4[a2].className:aZ(a4[a2]);if(a1){return a1}}return"inherit"}this.getFormat=function(a4){var a1=a0(a4[0]);for(var a3=1,a2=a4.length;a3<a2;a3++){if(a1!=a0(a4[a3])){return""}}return a1};this.isFormatted=function(a1){return this.getFormat(a1)!==""}}function E(aY,aZ,aX){b.call(this,aY,aZ);this.finder=new aW(aY,aX);this.activate=function(a1,a2){this.split(a1);if(aX){var a0=aX.replace(/-([a-z])/,function(a3,a4){return a4.toUpperCase()});this[aZ.style[a0]=="inherit"?"remove":"apply"](a2)}else{this.apply(a2)}}}function W(aX){af.call(this,s.extend(aX,{finder:new i(aX.format),formatter:function(){return new b(aX.format)}}))}function aA(aZ){V.call(this,aZ);var aY=s.browser.msie?"tSelectBox":"tComboBox";var aX=new aW([{tags:["span"]}],aZ.cssAttr);this.command=function(a0){return new aF(s.extend(a0,{formatter:function(){var a1={};a1[aZ.domAttr]=a0.value;return new E([{tags:["span"]}],{style:a1},aZ.cssAttr)}}))};this.update=function(a0,a2){var a1=a0.data(aY);a1.close();a1.value(aX.getFormat(a2))};this.init=function(a2,a0){var a1=a0.editor;a2[aY]({data:a1[aZ.name],onChange:function(a3){V.exec(a1,aZ.name,a3.value)},highlightFirst:false});a2.data(aY).dropDown.onItemCreate=function(a3){a3.html='<span unselectable="on" style="'+aZ.cssAttr+": "+a3.dataItem.Value+'">'+a3.dataItem.Text+"</span>"}}}function aU(aY){V.call(this,aY);var aX=new aW([{tags:["span"]}],aY.cssAttr);this.update=function(aZ){aZ.data("tColorPicker").close()};this.command=function(aZ){return new aF(s.extend(aZ,{formatter:function(){var a0={};a0[aY.domAttr]=aZ.value;return new E([{tags:["span"]}],{style:a0},aY.cssAttr)}}))};this.init=function(a1,aZ){var a0=aZ.editor;a1.tColorPicker({selectedColor:"#000000",onChange:function(a2){V.exec(a0,aY.name,a2.value)}})}}function Z(){V.call(this);var aX=new aW([{tags:["span"]}],"className");this.command=function(aY){return new aF(s.extend(aY,{formatter:function(){return new E([{tags:["span"]}],{className:aY.value})}}))};this.update=function(aY,a0){var aZ=aY.data("tSelectBox");aZ.close();aZ.value(aX.getFormat(a0))};this.init=function(a0,aY){var aZ=aY.editor;a0.tSelectBox({data:aZ.style,title:aZ.localization.style,onItemCreate:function(a1){var a2=C.inlineStyle(aZ.document,"span",{className:a1.dataItem.Value});a1.html='<span unselectable="on" style="display:block;'+a2+'">'+a1.html+"</span>"},onChange:function(a1){V.exec(aZ,"style",a1.value)}})}}function x(aY){function aX(a1,a2){for(var aZ=0;aZ<a2.length;aZ++){var a0=a2[aZ];if(a0==null||!y(a1,a0)){return false}}return true}this.findSuitable=function(a2){var a1=[];for(var aZ=0;aZ<a2.length;aZ++){var a0=C.parentOfType(a2[aZ],aY[0].tags);if(!a0){return[]}if(s.inArray(a0,a1)<0){a1.push(a0)}}for(var aZ=0;aZ<a1.length;aZ++){if(aX(a1[aZ],a1)){return[a1[aZ]]}}return a1};this.findFormat=function(a3){for(var aZ=0;aZ<aY.length;aZ++){var a1=a3;var a0=aY[aZ].tags;var a2=aY[aZ].attr;while(a1){if(C.ofType(a1,a0)&&A(a1,a2)){return a1}a1=a1.parentNode}}return null};this.getFormat=function(a3){var a1=s.proxy(function(a4){return this.findFormat(ac(a4)?a4.parentNode:a4)},this),aZ=a1(a3[0]);if(!aZ){return""}for(var a2=1,a0=a3.length;a2<a0;a2++){if(aZ!=a1(a3[a2])){return""}}return aZ.nodeName.toLowerCase()};this.isFormatted=function(aZ){for(var a0=0;a0<aZ.length;a0++){if(!this.findFormat(aZ[a0])){return false}}return true}}function U(aY,a0){var aZ=new x(aY);function aX(a4,a8,a6){var a5=a6.length==1?C.blockParentOrBody(a6[0]):C.commonAncestor.apply(null,a6);if(C.isInline(a5)){a5=C.blockParentOrBody(a5)}var a7=C.significantChildNodes(a5);var a3=p(a7[0]);var a9=C.create(a5.ownerDocument,a4,a8);for(var a1=0;a1<a7.length;a1++){var a2=a7[a1];if(C.isBlock(a2)){C.attr(a2,a8);if(a9.childNodes.length){C.insertBefore(a9,a2);a9=a9.cloneNode(false)}a3=p(a2)+1;continue}a9.appendChild(a2)}if(a9.firstChild){C.insertAt(a5,a9,a3)}}this.apply=function(a5){var a3=C.is(a5[0],"img")?[a5[0]]:aZ.findSuitable(a5);var a4=a3.length?ab(C.name(a3[0]),aY):aY[0];var a1=a4.tags[0];var a6=s.extend({},a4.attr,a0);if(a3.length){for(var a2=0;a2<a3.length;a2++){C.attr(a3[a2],a6)}}else{aX(a1,a6,a5)}};this.remove=function(a4){for(var a1=0,a3=a4.length;a1<a3;a1++){var a2=aZ.findFormat(a4[a1]);if(a2){if(C.ofType(a2,["p","img","li"])){C.unstyle(a2,ab(C.name(a2),aY).attr.style)}else{C.unwrap(a2)}}}};this.toggle=function(a2){var a1=S.nodes(a2);if(aZ.isFormatted(a1)){this.remove(a1)}else{this.apply(a1)}}}function aq(aX,aZ){var aY=new x(aX);this.apply=function(a5){var a1=X(a5);var a6=aX[0].tags[0];if(a1.length){for(var a0=0,a4=a1.length;a0<a4;a0++){if(C.is(a1[a0],"li")){var a7=a1[a0].parentNode;var a2=new I(a7.nodeName.toLowerCase(),a6);var a3=this.editor.createRange();a3.selectNode(a1[a0]);a2.toggle(a3)}else{C.changeTag(a1[a0],a6)}}}else{new U(aX,aZ).apply(a5)}};this.toggle=function(a1){var a0=j(a1);if(!a0.length){a1.selectNodeContents(a1.commonAncestorContainer);a0=j(a1);if(!a0.length){a0=C.significantChildNodes(a1.commonAncestorContainer)}}this.apply(a0)}}function aF(aX){aX.formatter=aX.formatter();c.call(this,aX)}function N(aX){af.call(this,s.extend(aX,{finder:new x(aX.format),formatter:function(){return new U(aX.format)}}))}function n(){V.call(this);var aX=new x([{tags:G}]);this.command=function(aY){return new aF(s.extend(aY,{formatter:function(){return new aq([{tags:[aY.value]}],{})}}))};this.update=function(aY,a0){var aZ=aY.data("tSelectBox");aZ.close();aZ.value(aX.getFormat(a0))};this.init=function(a0,aY){var aZ=aY.editor;a0.tSelectBox({data:aZ.formatBlock,title:aZ.localization.formatBlock,onItemCreate:function(a2){var a1=a2.dataItem.Value;a2.html="<"+a1+' unselectable="on" style="margin: .3em 0;'+C.inlineStyle(aZ.document,a1)+'">'+a2.dataItem.Text+"</"+a1+">"},onChange:function(a1){V.exec(aZ,"formatBlock",a1.value)},highlightFirst:false})}}function aO(aX){c.call(this,aX);this.exec=function(){var a0=this.getRange();var a8=q(a0);var a6=s.browser.msie?"":'<br _moz_dirty="" />';var a9=C.parentOfType(a0.startContainer,["p"]),aY=C.parentOfType(a0.endContainer,["p"]),aZ=(a9&&!aY)||(!a9&&aY);a0.deleteContents();var a7=C.create(a8,"a");a0.insertNode(a7);var a1=C.parentOfType(a7,"li".split(","));var a2;if(a1){var a4=a0.cloneRange();a4.selectNode(a1);if(j(a4).length==0){var ba=C.create(a8,"p");if(a1.nextSibling){aj(a4,a1.parentNode)}C.insertAfter(ba,a1.parentNode);C.remove(a1.parentNode.childNodes.length==1?a1.parentNode:a1);ba.innerHTML=a6;a2=ba}}if(!a2){if(!a1){new U([{tags:["p"]}]).apply([a7])}a0.selectNode(a7);var a3=C.parentOfType(a7,[a1?"li":"p"]);aj(a0,a3,aZ);var a5=a3.previousSibling;if(C.is(a5,"li")&&a5.firstChild&&!C.is(a5.firstChild,"br")){a5=a5.firstChild}a2=a3.nextSibling;if(C.is(a2,"li")&&a2.firstChild&&!C.is(a2.firstChild,"br")){a2=a2.firstChild}C.remove(a3);if(a5.firstChild&&C.is(a5.firstChild,"br")){C.remove(a5.firstChild)}if(ac(a5)&&a5.nodeValue==""){a5=a5.parentNode}if(a5&&a5.innerHTML==""){a5.innerHTML=a6}if(a2.firstChild&&C.is(a2.firstChild,"br")){C.remove(a2.firstChild)}if(ac(a2)&&a2.nodeValue==""){a2=a2.parentNode}if(a2.innerHTML==""){a2.innerHTML=a6}g(a5)}g(a2);a0.selectNodeContents(a2);a0.collapse(true);C.scrollTo(a2);M(a0)}}function d(aX){c.call(this,aX);this.exec=function(){var aZ=this.getRange();aZ.deleteContents();var aY=C.create(q(aZ),"br");aZ.insertNode(aY);aY.parentNode.normalize();if(!s.browser.msie&&(!aY.nextSibling||C.isWhitespace(aY.nextSibling))){var a0=aY.cloneNode(true);a0.setAttribute("_moz_dirty","");C.insertAfter(a0,aY)}aZ.setStartAfter(aY);aZ.collapse(true);M(aZ)}}function am(aY){var aX=[aY=="ul"?"ol":"ul",aY];x.call(this,[{tags:aX}]);this.isFormatted=function(a2){var aZ=[],a0;for(var a1=0;a1<a2.length;a1++){if((a0=this.findFormat(a2[a1]))&&C.name(a0)==aY&&s.inArray(a0,aZ)<0){aZ.push(a0)}}return aZ.length==1};this.findSuitable=function(aZ){var a0=C.parentOfType(aZ[0],aX);if(a0&&C.name(a0)==aY){return a0}return null}}function I(aZ,a0){var a1=new am(aZ);function aX(a5,a8){var a4=C.create(a5.ownerDocument,"li");for(var a6=0;a6<a8.length;a6++){var a7=a8[a6];if(C.is(a7,"li")){a5.appendChild(a7);continue}a4.appendChild(a7);if(C.isBlock(a7)){a5.appendChild(a4);C.unwrap(a7);a4=a4.cloneNode(false)}}if(a4.firstChild){a5.appendChild(a4)}}function a2(a4,a6){for(var a5=0;a5<a6.length;a5++){if(y(a4,a6[a5])){return true}}return false}function aY(a5,a4){return a2(a5,a4)||C.isInline(a5)||a5.nodeType==3}this.split=function(a8){var a9=j(a8);if(a9.length){var a6=C.parentOfType(a9[0],["li"]);var a4=C.parentOfType(a9[a9.length-1],["li"]);a8.setStartBefore(a6);a8.setEndAfter(a4);for(var a5=0,a7=a9.length;a5<a7;a5++){var ba=a1.findFormat(a9[a5]);if(ba){aj(a8,ba,true)}}}};this.apply=function(a8){var a7=a8.length==1?C.parentOfType(a8[0],["ul","ol"]):C.commonAncestor.apply(null,a8);if(!a7){a7=a8[0].ownerDocument.body}if(C.isInline(a7)){a7=C.blockParentOrBody(a7)}var ba=[];var a6=a1.findSuitable(a8);if(!a6){a6=new am(aZ=="ul"?"ol":"ul").findSuitable(a8)}var a5=C.significantChildNodes(a7);for(var a4=0;a4<a5.length;a4++){var a9=a5[a4];var bb=C.name(a9);if(aY(a9,a8)&&(!a6||!y(a6,a9))){if(a6&&(bb=="ul"||bb=="ol")){s.each(a9.childNodes,function(){ba.push(this)});C.remove(a9)}else{ba.push(a9)}}}if(ba.length==a5.length&&a7!=a8[0].ownerDocument.body){ba=[a7]}if(!a6){a6=C.create(a7.ownerDocument,aZ);C.insertBefore(a6,ba[0])}aX(a6,ba);if(!C.is(a6,aZ)){C.changeTag(a6,aZ)}};function a3(a4){for(var a5=a4.firstChild;a5;a5=a5.nextSibling){var a7=C.create(a4.ownerDocument,a0||"p");while(a5.firstChild){var a6=a5.firstChild;if(C.isBlock(a6)){C.insertBefore(a6,a4)}else{a7.appendChild(a6)}}if(a7.firstChild){C.insertBefore(a7,a4)}}C.remove(a4)}this.remove=function(a7){var a5;for(var a4=0,a6=a7.length;a4<a6;a4++){if(a5=a1.findFormat(a7[a4])){a3(a5)}}};this.toggle=function(a5){var a4=j(a5);if(!a4.length){a5.selectNodeContents(a5.commonAncestorContainer);a4=j(a5);if(!a4.length){a4=C.significantChildNodes(a5.commonAncestorContainer)}}if(a1.isFormatted(a4)){this.split(a5);this.remove(a4)}else{this.apply(a4)}}}function aw(aX){aX.formatter=new I(aX.tag);c.call(this,aX)}function aI(aX){af.call(this,s.extend(aX,{finder:new am(aX.tag)}));this.command=function(aY){return new aw(s.extend(aY,{tag:aX.tag}))}}function H(){this.findSuitable=function(aX){return C.parentOfType(aX,["a"])}}function aT(){this.finder=new H();this.apply=function(aX,a3){var aZ=j(aX);if(a3.innerHTML!=undefined){var a0=aC(aX);var aY=q(aX);aX.deleteContents();var a1=C.create(aY,"a",a3);aX.insertNode(a1);if(a0.length>1){C.insertAfter(a0[a0.length-1],a1);C.insertAfter(a0[1],a1);C[aZ.length>0?"insertBefore":"insertAfter"](a0[0],a1)}}else{var a2=new b([{tags:["a"]}],a3);a2.finder=this.finder;a2.apply(aZ)}}}function al(aX){aX.formatter={toggle:function(aY){new b([{tags:["a"]}]).remove(j(aY))}};c.call(this,aX)}function Y(aY){c.call(this,aY);var aX;this.async=true;var aZ=new aT();this.exec=function(){var a4=this.getRange();var a2=a4.collapsed;a4=this.lockRange(true);var a7=j(a4);var a6=null;var a1=this;function a8(be){var bd=s("#t-editor-link-url",a5.element).val();if(bd&&bd!="http://"){aX={href:bd};var ba=s("#t-editor-link-title",a5.element).val();if(ba){aX.title=ba}var bb=s("#t-editor-link-text",a5.element).val();if(bb!==a6){aX.innerHTML=bb}var bc=s("#t-editor-link-target",a5.element).is(":checked");if(bc){aX.target="_blank"}aZ.apply(a4,aX)}a3(be);if(a1.change){a1.change()}}function a3(ba){ba.preventDefault();a5.destroy();ax(q(a4)).focus();a1.releaseRange(a4)}var a9=a7.length?aZ.finder.findSuitable(a7[0]):null;var a0=a7.length<=1||(a7.length==2&&a2);var a5=ao.window.create(s.extend({},this.editor.dialogOptions,{title:"Insert link",html:new s.telerik.stringBuilder().cat('<div class="t-editor-dialog">').cat("<ol>").cat('<li class="t-form-text-row"><label for="t-editor-link-url">Web address</label><input type="text" id="t-editor-link-url"/></li>').catIf('<li class="t-form-text-row"><label for="t-editor-link-text">Text</label><input type="text" id="t-editor-link-text"/></li>',a0).cat('<li class="t-form-text-row"><label for="t-editor-link-title">Tooltip</label><input type="text" id="t-editor-link-title"/></li>').cat('<li class="t-form-checkbox-row"><input type="checkbox" id="t-editor-link-target"/><label for="t-editor-link-target">Open link in new window</label></li>').cat("</ol>").cat('<div class="t-button-wrapper">').cat('<button class="t-dialog-insert t-button t-state-default">Insert</button>').cat("&nbsp;or&nbsp;").cat('<a href="#" class="t-dialog-close t-link">Close</a>').cat("</div>").cat("</div>").string(),onClose:a3})).hide().find(".t-dialog-insert").click(a8).end().find(".t-dialog-close").click(a3).end().find(".t-form-text-row input").keydown(function(ba){if(ba.keyCode==13){a8(ba)}else{if(ba.keyCode==27){a3(ba)}}}).end().delegate(".t-button","mouseenter",ao.buttonHover).delegate(".t-button","mouseleave",ao.buttonLeave).find("#t-editor-link-url").val(a9?a9.getAttribute("href",2):"http://").end().find("#t-editor-link-text").val(a7.length>0?(a7.length==1?a7[0].nodeValue:a7[0].nodeValue+a7[1].nodeValue):"").end().find("#t-editor-link-title").val(a9?a9.title:"").end().find("#t-editor-link-target").attr("checked",a9?a9.target=="_blank":false).end().show().data("tWindow").center();if(a0&&a7.length>0){a6=s("#t-editor-link-text",a5.element).val()}s("#t-editor-link-url",a5.element).focus().select()},this.redo=function(){var a0=this.lockRange(true);aZ.apply(a0,aX);this.releaseRange(a0)}}function aP(aY){V.call(this,s.extend(aY,{command:al}));var aX=new i([{tags:["a"]}]);this.init=function(aZ){aZ.attr("unselectable","on").addClass("t-state-disabled")};this.update=function(aZ,a0){aZ.toggleClass("t-state-disabled",!aX.isFormatted(a0)).removeClass("t-state-hover")}}function aJ(aY){c.call(this,aY);this.async=true;var aX;function aZ(a0,a1){if(aX.src&&aX.src!="http://"){if(!a0){a0=C.create(q(a1),"img",aX);a0.onload=a0.onerror=function(){a0.removeAttribute("complete");a0.removeAttribute("width");a0.removeAttribute("height")};a1.deleteContents();a1.insertNode(a0);a1.setStartAfter(a0);a1.setEndAfter(a0);M(a1);return true}else{C.attr(a0,aX)}}return false}this.redo=function(){var a0=this.lockRange();if(!aZ(S.image(a0),a0)){this.releaseRange(a0)}};this.exec=function(){var a3=this.lockRange();var a0=false;var a5=S.image(a3);var a1=this;function a6(a7){aX={src:s("#t-editor-image-url",a4.element).val(),alt:s("#t-editor-image-title",a4.element).val()};a0=aZ(a5,a3);a2(a7);if(a1.change){a1.change()}}function a2(a7){a7.preventDefault();a4.destroy();ax(q(a3)).focus();if(!a0){a1.releaseRange(a3)}}var a4=ao.window.create(s.extend({},this.editor.dialogOptions,{title:"Insert image",html:new s.telerik.stringBuilder().cat('<div class="t-editor-dialog">').cat("<ol>").cat('<li class="t-form-text-row"><label for="t-editor-image-url">Web address</label><input type="text" id="t-editor-image-url"/></li>').cat('<li class="t-form-text-row"><label for="t-editor-image-title">Tooltip</label><input type="text" id="t-editor-image-title"/></li>').cat("</ol>").cat('<div class="t-button-wrapper">').cat('<button class="t-dialog-insert t-button t-state-default">Insert</button>').cat("&nbsp;or&nbsp;").cat('<a href="#" class="t-dialog-close t-link">Close</a>').cat("</div>").cat("</div>").string(),onClose:a2})).hide().find(".t-dialog-insert").click(a6).end().find(".t-dialog-close").click(a2).end().find(".t-form-text-row input").keydown(function(a7){if(a7.keyCode==13){a6(a7)}else{if(a7.keyCode==27){a2(a7)}}}).end().delegate(".t-button","mouseenter",ao.buttonHover).delegate(".t-button","mouseleave",ao.buttonLeave).find("#t-editor-image-url").val(a5?a5.getAttribute("src",2):"http://").end().find("#t-editor-image-title").val(a5?a5.alt:"").end().show().data("tWindow").center();s("#t-editor-image-url",a4.element).focus().select()}}ao.selectbox=function(aX,aY){var a5;var aZ=s(aX);var a1=aZ.find(".t-input");var a2=this.dropDown=new ao.dropDown({effects:ao.fx.slide.defaults(),onItemCreate:aY.onItemCreate,onClick:function(a6){a4(aY.data[s(a6.item).index()].Value);aY.onChange({value:a5})}});function a0(){if(!a2.$items){a2.dataBind(aY.data)}}function a3(a6){a1.html(a6?a6:"&nbsp;")}function a4(a8){a0();var a7=-1;for(var a6=0,a9=aY.data.length;a6<a9;a6++){if(aY.data[a6].Value==a8){a7=a6;break}}if(a7!=-1){a2.$items.removeClass("t-state-selected").eq(a7).addClass("t-state-selected");a3(s(a2.$items[a7]).text());a5=aY.data[a7].Value}}this.value=function(a6){a4(a6);if(a5!=a6){a3(aY.title||a6)}};this.close=function(){a2.close()};a3(aY.title||a1.text());aZ.bind("click",function(a6){a0();if(a2.isOpened()){a2.close()}else{a2.open({offset:aZ.offset(),outerHeight:aZ.outerHeight(),outerWidth:aZ.outerWidth(),zIndex:ao.getElementZIndex(aZ[0])})}}).find("*").attr("unselectable","on");a2.$element.css("direction",aZ.closest(".t-rtl").length>0?"rtl":"");s(document.documentElement).bind("mousedown",s.proxy(function(a8){var a6=a2.$element;var a7=a6&&a6.parent().length>0;if(a7&&!s.contains(aX,a8.target)&&!s.contains(a6.parent()[0],a8.target)){a2.close()}},this))};s.fn.tSelectBox=function(aX){return ao.create(this,{name:"tSelectBox",init:function(aY,aZ){return new ao.selectbox(aY,aZ)},options:aX})};s.fn.tSelectBox.defaults={effects:s.fn.tDropDownList.defaults.effects};ao.colorpicker=function(aX,aY){this.element=aX;var aZ=s(aX);s.extend(this,aY);aZ.bind("click",s.proxy(this.click,this)).find("*").attr("unselectable","on");if(this.selectedColor){aZ.find(".t-selected-color").css("background-color",this.selectedColor)}s(aX.ownerDocument.documentElement).bind("mousedown",s.proxy(function(a0){if(!s(a0.target).closest(".t-colorpicker-popup").length){this.close()}},this));ao.bind(this,{change:this.onChange,load:this.onLoad})};ao.colorpicker.prototype={select:function(aX){if(aX){aX=C.toHex(aX);if(!ao.trigger(this.element,"change",{value:aX})){this.value(aX);this.close()}}else{ao.trigger(this.element,"change",{value:this.selectedColor})}},open:function(){var aX=this.popup();var a0=s(this.element);var aZ=a0.offset();aZ.top+=a0.outerHeight();if(a0.closest(".t-rtl").length){aZ.left-=aX.outerWidth()-a0.outerWidth()}var aY="auto";a0.parents().andSelf().each(function(){aY=s(this).css("zIndex");if(Number(aY)){aY=Number(aY)+1;return false}});ao.fx._wrap(aX).css(s.extend({position:"absolute",zIndex:aY},aZ));aX.find(".t-item").bind("click",s.proxy(function(a2){var a1=s(a2.target,a2.target.ownerDocument).css("background-color");this.select(a1)},this));ao.fx.play(this.effects,aX,{direction:"bottom"})},close:function(){if(!this.$popup){return}ao.fx.rewind(this.effects,this.$popup,{direction:"bottom"},s.proxy(function(){C.remove(this.$popup[0].parentNode);this.$popup=null},this))},toggle:function(){if(!this.$popup||!this.$popup.is(":visible")){this.open()}else{this.close()}},click:function(aX){if(s(aX.target).closest(".t-tool-icon").length>0){this.select()}else{this.toggle()}},value:function(aX){if(!aX){return this.selectedColor}aX=C.toHex(aX);this.selectedColor=aX;s(".t-selected-color",this.element).css("background-color",aX)},popup:function(){if(!this.$popup){this.$popup=s(ao.colorpicker.buildPopup(this)).hide().appendTo(document.body).find("*").attr("unselectable","on").end()}return this.$popup}};s.extend(ao.colorpicker,{buildPopup:function(aX){var a0=new ao.stringBuilder();a0.cat('<div class="t-popup t-group t-colorpicker-popup">').cat('<ul class="t-reset">');var a2=aX.data;var aZ=(aX.value()||"").substring(1);for(var aY=0,a1=a2.length;aY<a1;aY++){a0.cat('<li class="t-item').catIf(" t-selected",a2[aY]==aZ).cat('" style="background-color:#').cat(a2[aY]).cat('"></li>')}a0.cat("</ul></div>");return a0.string()}});s.fn.tColorPicker=function(aX){return ao.create(this,{name:"tColorPicker",init:function(aY,aZ){return new ao.colorpicker(aY,aZ)},options:aX})};s.fn.tColorPicker.defaults={data:"000000,7f7f7f,880015,ed1c24,ff7f27,fff200,22b14c,00a2e8,3f48cc,a349a4,ffffff,c3c3c3,b97a57,ffaec9,ffc90e,efe4b0,b5e61d,99d9ea,7092be,c8bfe7".split(","),selectedColor:null,effects:s.fn.tDropDownList.defaults.effects};function aR(){var aY=new x([{tags:G}]);function aX(aZ){return aZ.style.marginLeft||0}this.apply=function(a4){var a2=aY.findSuitable(a4);if(a2.length){var a1=[];for(var a0=0;a0<a2.length;a0++){if(C.is(a2[a0],"li")){if(s(a2[a0]).index()==0){a1.push(a2[a0].parentNode)}else{if(s.inArray(a2[a0].parentNode,a1)<0){a1.push(a2[a0])}}}else{a1.push(a2[a0])}}while(a1.length){var a5=a1.shift();if(C.is(a5,"li")){var a8=a5.parentNode;var a3=s(a5).prev("li");var a7=a3.find(">ul")[0];if(!a7){a7=C.create(a5.ownerDocument,C.name(a8));a3.append(a7)}while(a5&&a5.parentNode==a8){a7.appendChild(a5);a5=a1.shift()}}else{var aZ=parseInt(aX(a5))+30;C.style(a5,{marginLeft:aZ})}}}else{var a6=new U([{tags:G}],{style:{marginLeft:30}});a6.apply(a4)}};this.remove=function(a1){var a3=aY.findSuitable(a1);for(var aZ=0;aZ<a3.length;aZ++){var a0=s(a3[aZ]);if(a0.is("li")){var a6=a0.parent();var a2=a6.parent();if(a2.is("li")&&!aX(a6[0])){var a5=a0.nextAll("li");if(a5.length){s(a6[0].cloneNode(false)).appendTo(a0).append(a5)}a0.insertAfter(a2);if(!a6.children("li").length){a6.remove()}continue}else{a0=a6}}var a4=parseInt(aX(a0[0]))-30;C[a4<=0?"unstyle":"style"](a0[0],{marginLeft:a4})}}}function o(aX){aX.formatter={toggle:function(aY){new aR().apply(S.nodes(aY))}};c.call(this,aX)}function Q(aX){aX.formatter={toggle:function(aY){new aR().remove(S.nodes(aY))}};c.call(this,aX)}function ad(){V.call(this,{command:Q});var aX=new x([{tags:G}]);this.init=function(aY){aY.attr("unselectable","on").addClass("t-state-disabled")};this.update=function(aZ,a1){var a0=aX.findSuitable(a1);for(var aY=0;aY<a0.length;aY++){if(C.is(a0[aY],"li")||a0[aY].style.marginLeft){aZ.removeClass("t-state-disabled");return}}aZ.addClass("t-state-disabled").removeClass("t-state-hover")}}function av(aX,a2){aX.hide();var a1=s("<iframe />",{src:'javascript:"<html></html>"',frameBorder:"0",className:"t-content"}).css("display","").insertBefore(aX)[0];var aY=a1.contentWindow||a1;var a0=aY.document||a1.contentDocument;var aZ=aX.val().replace(/(<\/?img[^>]*>)[\r\n\v\f\t ]+/ig,"$1");if(!aZ.length&&s.browser.mozilla){aZ='<br _moz_dirty="true" />'}a0.designMode="On";a0.open();a0.write(new ao.stringBuilder().cat("<!DOCTYPE html><html><head>").cat('<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />').cat('<style type="text/css">').cat("html,body{padding:0;margin:0;font-family:Verdana,Geneva,sans-serif;background:#fff;}").cat("html{font-size:100%}body{font-size:.75em;line-height:1.5em;padding-top:1px;margin-top:-1px;").catIf("direction:rtl;",aX.closest(".t-rtl").length).cat("}").cat("h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}").cat("p{margin:1em 0;padding:0 .2em}.t-marker{display:none;}.t-paste-container{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}").cat("ul,ol{padding-left:2.5em}").cat("a{color:#00a}").cat("code{font-size:1.23em}").cat("</style>").cat(s.map(a2,function(a3){return['<link type="text/css" href="',a3,'" rel="stylesheet"/>'].join("")}).join("")).cat('</head><body spellcheck="false">').cat(aZ).cat("</body></html>").string());a0.close();return aY}function T(aX){ao.trigger(aX.element,"selectionChange")}function au(aX){if(aX.pendingFormats.length==0){return}aX.pendingFormats.reverse();s.each(aX.pendingFormats,function(){for(var aY=this.firstChild;aY;aY=aY.nextSibling){while(aY.nodeType==3&&(charIndex=aY.nodeValue.indexOf("\ufeff"))>=0){aY.deleteData(charIndex,1)}}});s.each(aX.pendingFormats,function(){if(this.innerHTML==""&&this.parentNode){C.remove(this)}});aX.pendingFormats=[]}ao.editor=function(aX,aY){if(/Mobile.*Safari/.test(navigator.userAgent)){return}var aZ=this;this.element=aX;var a0=s(aX);a0.closest("form").bind("submit",function(){aZ.update()});s.extend(this,aY);ao.bind(this,{load:this.onLoad,selectionChange:this.onSelectionChange,change:this.onChange,execute:this.onExecute});this.textarea=a0.find("textarea").attr("autocomplete","off")[0];this.window=av(s(this.textarea),this.stylesheets);this.document=this.window.contentDocument||this.window.document;this.body=this.document.body;this.keyboard=new aE([new aK(this),new z(this)]);this.clipboard=new ay(this);this.pendingFormats=[];this.undoRedoStack=new P();function a4(a5){var a6=s.grep(a5.className.split(" "),function(a7){return !/^t-(widget|tool-icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(a7)});return a6[0]?a6[0].substring(2):"custom"}function a3(a6,a5){if(!a5.key){return a6}return new ao.stringBuilder().cat(a6).cat(" (").catIf("Ctrl + ",a5.ctrl).catIf("Shift + ",a5.shift).catIf("Alt + ",a5.alt).cat(a5.key).cat(")").string()}s(this.window).bind("blur",function(){var a5=aZ.textarea.value;var a6=aZ.encodedValue();aZ.update(a6);if(a6!=a5){ao.trigger(aZ.element,"change")}});var a2=".t-editor-toolbar > li > *";var a1=".t-editor-button .t-tool-icon:not(.t-state-disabled)";a0.delegate(a1,"mouseenter",ao.hover).delegate(a1,"mouseleave",ao.leave).delegate(a1,"mousedown",ao.preventDefault).delegate(a1,"click",ao.stopAll(function(a5){aZ.focus();aZ.exec(a4(this))})).find(a2).each(function(){var a9=a4(this),a6=aZ.tools[a9],a8=aZ.localization[a9],a7=s(this);if(!a6){return}if(a9=="fontSize"||a9=="fontName"){var a5=aZ.localization[a9+"Inherit"]||aL[a9+"Inherit"];aZ[a9][0].Text=a5;a7.find("input").val(a5).end().find("span.t-input").text(a5).end()}a6.init(a7,{title:a3(a8,a6),editor:aZ})}).end().bind("selectionChange",function(){var a6=aZ.getRange();aZ.selectionRestorePoint=new ak(a6);var a5=j(a6);if(!a5.length){a5=[a6.startContainer]}a0.find(a2).each(function(){var a7=aZ.tools[a4(this)];if(a7){a7.update(s(this),a5)}})});s(document).bind("mousedown",function(){if(aZ.keyboard.typingInProgress()){aZ.keyboard.endTyping(true)}}).bind("DOMNodeInserted",function(a5){if(s.contains(a5.target,aZ.element)||aZ.element==a5.target){s(aZ.element).find("iframe").remove();aZ.window=av(s(aZ.textarea),aZ.stylesheets);aZ.document=aZ.window.contentDocument||aZ.window.document;aZ.body=aZ.document.body}});s(this.document).bind({keydown:function(a6){var a5=aZ.keyboard.toolFromShortcut(aZ.tools,a6);if(a5){a6.preventDefault();aZ.exec(a5);return false}aZ.keyboard.clearTimeout();aZ.keyboard.keydown(a6)},keyup:function(a5){var a6=[8,9,13,33,34,35,36,37,38,39,40,40,45,46];if(s.inArray(a5.keyCode,a6)>-1){T(aZ)}aZ.keyboard.keyup(a5)},mouseup:function(){T(aZ)}});s(this.body).bind("cut paste",function(a5){aZ.clipboard["on"+a5.type](a5)})};s.extend(ao.editor,{Dom:C,RestorePoint:ak,Marker:aa,RangeUtils:S,RangeEnumerator:ag,LinkFormatter:aT,LinkFormatFinder:H,LinkCommand:Y,UnlinkCommand:al,InlineFormatter:b,GreedyInlineFormatter:E,InlineFormatFinder:i,GreedyInlineFormatFinder:aW,BlockFormatter:U,GreedyBlockFormatter:aq,BlockFormatFinder:x,FormatCommand:aF,IndentFormatter:aR,IndentCommand:o,OutdentCommand:Q,ListFormatFinder:am,ListFormatter:I,ListCommand:aw,ParagraphCommand:aO,NewLineCommand:d,ImageCommand:aJ,InsertHtmlCommand:aN,GenericCommand:aS,UndoRedoStack:P,TypingHandler:aK,SystemHandler:z,Keyboard:aE,MSWordFormatCleaner:f});ao.editor.prototype={value:function(aZ){var aX=this.body;if(aZ===undefined){return B(aX)}aZ=aZ.replace(/<!\[CDATA\[(.*)?\]\]>/g,"<!--[CDATA[$1]]-->");aZ=aZ.replace(/<script([^>]*)>(.*)?<\/script>/ig,"<telerik:script $1>$2</telerik:script>");if(s.browser.msie){aZ="<br/>"+aZ;var a0="originalsrc",aY="originalhref";aZ=aZ.replace(/href\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,aY+'="$1"');aZ=aZ.replace(/src\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,a0+'="$1"');aX.innerHTML=aZ;C.remove(aX.firstChild);s(aX).find("telerik\\:script,script,link,img,a").each(function(){var a1=this;if(a1[aY]){a1.setAttribute("href",a1[aY]);a1.removeAttribute(aY)}if(a1[a0]){a1.setAttribute("src",a1[a0]);a1.removeAttribute(a0)}})}else{aX.innerHTML=aZ}this.update()},focus:function(){this.window.focus()},update:function(aX){this.textarea.value=aX||this.encoded?this.encodedValue():this.value()},encodedValue:function(){return C.encode(this.value())},createRange:function(aX){return aM(aX||this.document)},getSelection:function(){return aV(this.document)},selectRange:function(aY){var aX=this.getSelection();aX.removeAllRanges();aX.addRange(aY)},getRange:function(){var aX=this.getSelection();return aX.rangeCount>0?aX.getRangeAt(0):this.createRange()},selectedHtml:function(){return B(this.getRange().cloneContents())},paste:function(aX){this.clipboard.paste(aX)},exec:function(a0,aX){a0=a0.toLowerCase();var a2="";for(var aZ in this.tools){if(aZ.toLowerCase()==a0){a2=this.tools[aZ];break}}if(a2){var aY=this.getRange();var a1=a2.command?a2.command(s.extend({range:aY},aX)):null;ao.trigger(this.element,"execute",{name:a0,command:a1});if(/undo|redo/i.test(a0)){this.undoRedoStack[a0]()}else{if(a1){if(!a1.managesUndoRedo){this.undoRedoStack.push(a1)}a1.editor=this;a1.exec();if(a1.async){a1.change=s.proxy(function(){T(this)},this);return}}}T(this)}}};s.fn.tEditor=function(aX){return ao.create(this,{name:"tEditor",init:function(aY,aZ){return new ao.editor(aY,aZ)},options:aX})};var ah={bold:[{tags:["strong"]},{tags:["span"],attr:{style:{fontWeight:"bold"}}}],italic:[{tags:["em"]},{tags:["span"],attr:{style:{fontStyle:"italic"}}}],underline:[{tags:["span"],attr:{style:{textDecoration:"underline"}}}],strikethrough:[{tags:["del"]},{tags:["span"],attr:{style:{textDecoration:"line-through"}}}],justifyLeft:[{tags:G,attr:{style:{textAlign:"left"}}},{tags:["img"],attr:{style:{"float":"left"}}}],justifyCenter:[{tags:G,attr:{style:{textAlign:"center"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto"}}}],justifyRight:[{tags:G,attr:{style:{textAlign:"right"}}},{tags:["img"],attr:{style:{"float":"right"}}}],justifyFull:[{tags:G,attr:{style:{textAlign:"justify"}}}]};function ab(aZ,aY){for(var aX=0;aX<aY.length;aX++){if(s.inArray(aZ,aY[aX].tags)>=0){return aY[aX]}}}function V(aX){s.extend(this,aX);this.init=function(aY,aZ){aY.attr({unselectable:"on",title:aZ.title})};this.command=function(aY){return new aX.command(aY)};this.update=function(){}}V.exec=function(aY,aZ,aX){aY.focus();if(aY.selectionRestorePoint){aY.selectRange(aY.selectionRestorePoint.toRange())}aY.exec(aZ,{value:aX})};function af(aX){V.call(this,aX);this.command=function(aY){return new aF(s.extend(aY,{formatter:aX.formatter}))};this.update=function(aY,aZ){aY.toggleClass("t-state-active",aX.finder.isFormatted(aZ))}}var O=function(){return{isFormatted:function(){return false}}};var aL={bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",justifyCenter:"Center text",justifyLeft:"Align text left",justifyRight:"Align text right",justifyFull:"Justify",insertUnorderedList:"Insert unordered list",insertOrderedList:"Insert ordered list",indent:"Indent",outdent:"Outdent",createLink:"Insert hyperlink",unlink:"Remove hyperlink",insertImage:"Insert image",insertHtml:"Insert HTML",fontName:"Select font family",fontNameInherit:"(inherited font)",fontSize:"Select font size",fontSizeInherit:"(inherited size)",formatBlock:"Format",style:"Styles"};s.fn.tEditor.defaults={localization:aL,formats:ah,encoded:true,stylesheets:[],dialogOptions:{modal:true,resizable:false,draggable:true,effects:{list:[{name:"toggle"}]}},fontName:[{Text:aL.fontNameInherit,Value:"inherit"},{Text:"Arial",Value:"Arial,Helvetica,sans-serif"},{Text:"Courier New",Value:"'Courier New',Courier,monospace"},{Text:"Georgia",Value:"Georgia,serif"},{Text:"Impact",Value:"Impact,Charcoal,sans-serif"},{Text:"Lucida Console",Value:"'Lucida Console',Monaco,monospace"},{Text:"Tahoma",Value:"Tahoma,Geneva,sans-serif"},{Text:"Times New Roman",Value:"'Times New Roman',Times,serif"},{Text:"Trebuchet MS",Value:"'Trebuchet MS',Helvetica,sans-serif"},{Text:"Verdana",Value:"Verdana,Geneva,sans-serif"}],fontSize:[{Text:aL.fontSizeInherit,Value:"inherit"},{Text:"1 (8pt)",Value:"xx-small"},{Text:"2 (10pt)",Value:"x-small"},{Text:"3 (12pt)",Value:"small"},{Text:"4 (14pt)",Value:"medium"},{Text:"5 (18pt)",Value:"large"},{Text:"6 (24pt)",Value:"x-large"},{Text:"7 (36pt)",Value:"xx-large"}],formatBlock:[{Text:"Paragraph",Value:"p"},{Text:"Quotation",Value:"blockquote"},{Text:"Heading 1",Value:"h1"},{Text:"Heading 2",Value:"h2"},{Text:"Heading 3",Value:"h3"},{Text:"Heading 4",Value:"h4"},{Text:"Heading 5",Value:"h5"},{Text:"Heading 6",Value:"h6"}],tools:{bold:new W({key:"B",ctrl:true,format:ah.bold}),italic:new W({key:"I",ctrl:true,format:ah.italic}),underline:new W({key:"U",ctrl:true,format:ah.underline}),strikethrough:new W({format:ah.strikethrough}),undo:{key:"Z",ctrl:true},redo:{key:"Y",ctrl:true},insertLineBreak:new V({key:13,shift:true,command:d}),insertParagraph:new V({key:13,command:aO}),justifyCenter:new N({format:ah.justifyCenter}),justifyLeft:new N({format:ah.justifyLeft}),justifyRight:new N({format:ah.justifyRight}),justifyFull:new N({format:ah.justifyFull}),insertUnorderedList:new aI({tag:"ul"}),insertOrderedList:new aI({tag:"ol"}),createLink:new V({key:"K",ctrl:true,command:Y}),unlink:new aP({key:"K",ctrl:true,shift:true}),insertImage:new V({command:aJ}),indent:new V({command:o}),outdent:new ad(),insertHtml:new w(),style:new Z(),fontName:new aA({cssAttr:"font-family",domAttr:"fontFamily",name:"fontName"}),fontSize:new aA({cssAttr:"font-size",domAttr:"fontSize",name:"fontSize"}),formatBlock:new n(),foreColor:new aU({cssAttr:"color",domAttr:"color",name:"foreColor"}),backColor:new aU({cssAttr:"background-color",domAttr:"backgroundColor",name:"backColor"})}}})(jQuery);